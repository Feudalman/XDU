# 此版本已基本完成超级管理员开发
# 正在进行管理员界面开发

<hr/>

## 当前大版本拟完成工作
#### 1.管理员界面全部UI复原

<hr/>

## 当前小版本拟完成工作
    
### 1. 创建各个组件，配置路由
### 2. 完成主界面基本布局
### 3. 界面标题好像写死了，得改（“西电青年志愿者啥啥啥”


<hr/>


## 开发过程发现问题（全部遗留问题在此，应与当前版本问题不重复

#### 1. 怎么解决token过期验证问题?
###### 比如用户直接登录界面，目前代码只判定token是否存在，那么就会有一个问题，token
###### 过期之后，请求会失效，那么应该做一个判断，token是否失效，如果失效就要重新登录，
#### 解决方案：
#####  <1.1>日期判断
###### token七天失效，判断token过期时间，重新登录（需要后端配合，有点复杂）
#####  <1.2>失效返回
###### 请求时，截取token失效导致的失败，清空失效token，返回登录界面重新登录

#### 2. 跳转页面，获取用户数据时，在localstory存储，安全隐患
#### 解决方案：
##### <2.1>使用VUEX
###### 并优化token管理（不要用localstory）

#### 3. toast被确认之后，应有一个success的message弹窗
##### 解决方案一：使用naive的组件，但是需要使用到setup函数，还不是很懂这个东西
##### 解决方案二：自己写一个，怎么说，自己的用自己的，虽然有点点麻烦，如果要这么弄的话，得先把业务逻辑弄清楚

#### 4. 超级管理员，招新数据那一个界面，表格刷新的时候，因为后端只给了部门ID没有给name，还需要for循环一下，单独发请求拿name，很浪费资源，用户体验影响非常大。(现已改成方案四)
##### 解决方案一：看能不能后端发送数据的时候修改一下。（上策）
##### 解决方案二：不单独发每个部门请求了，直接请求组织下全部部门的数据，再处理（下策）
##### 解决方案三：configure界面是请求过所有部门的信息的,可以传给data用。（中策）
##### 解决方案四：data界面自己在钩子中发起GetAllDepartments，然后处理。（中策,感觉比三差点,但是稍微方便点，就先这么用着吧）

#### 5. 登录超级管理员后，获取部门列表头一次会出现渲染错误，需要刷新一次才行，很致命，得找到BUG改了

#### 6. 用户名等地方，超出之后需要修改样式不完全显示，鼠标移动到上面再完全显示。测试的时候要找一找

#### 7. 获取本部门面试官的接口还没有，先做别的。

#### 8. 请求表格数据的时候，使用传参请求的方式有点问题，数据异常溢出。

## 当前版本发现问题：(当备忘录用的)
#### 1.超级管理员部门列表渲染错误，flex害人,管理员配置界面也有类似问题(已解决)


<hr/>


## 实际完成任务点

### 1. 页面重合度分析（写到哪分析到哪吧）：
#### <1> 开发归类
###### -1- 招新数据：管理员和超级管理员重合度高
###### -2- 界面布局设计：管理员外部导航等同超级管理员 
###### -3- 上方的四个统计block，创建公共组件，标题等信息通过父组件的v-for传进去 
###### -4- 下面的好说，因为超级管理员有表格而管理员没有这个表格，到时候不同的界面传递不同的is属性过去就行了 

先分析到这，等招新数据全写完了再说后面的

### 2. 把目录创建好了，配置了router，创建了导航组件

### 3. 完成新增面试官组件（差个请求没做好，还有错误处理等）

### 4. 完成了delete功能模式的更新
#### 关键点：
##### <1> 新增了删除的类型参数
##### <2> 把toast作为中间件传参
##### <3> delete组件的逻辑
#### 解决方案：
##### <1> 超级管理员和管理员的删除功能差距很小，组件重合度高，所以没开新的组件，直接在DepartmentDelete上面修改的，之后需要重命名一下更好
##### <2> 为了减少代码修改量，没有使用if与else if组合，而是使用了if与else，if进行判断管理员传参的逻辑，而超级管理员没有传参（没有修改代码），所以直接把原来的超级管理员层面的逻辑代码放进else代码块里。
##### <3> 传参：调用toast的时候，如果是调用删除功能，即传参detele表示删除类型，toast层面不做判断，而交给toast的子级删除组件进行逻辑处理。
##### <4> 同上，toast对参数仅做传递，不进行处理。没有用到祖孙传参，detele也不是什么见不得人的参数。
##### <5> 如果delete是interviewer类型的，修改对应数据，发送对应请求就完了，简单。


<!-- 以下三个都需要有了获取部门面试官的接口之后才能继续完善 -->
### 5. delete的请求还未完成，请求之后还要toast调用interviewer组件重排面试官数据
### 6. 新增面试官的api还没弄（Api做完了，但是缺少获取部门面试官的接口，先放一放）
### 7. interveiwer组件的钩子函数还未完成，应该进行预请求拿到面试官数组。

### 8. 完成了部门招新统计数据界面
#### 解决方案：
##### <1> UI结构等，使用的同组织招新数据界面
##### <2> 还是created钩子里面发请求，驱动渲染


### 9. 删除选中成员
#### 解决方案：
##### <1> 关键点在于，快捷的传参
##### <2> 沟通后端是在toast的component里面完成的，而拿到选中的东西是在toast上一级拿到的。
##### <3> 祖孙传参嘛，可以，孙调祖组件的方法，给一个返回值

<hr/>
当前版本结束
<hr/>




### 可优化点（未解决的）：

#### 1.超级管理员与管理员，背景代码复用问题

#### 2.超级管理员配置界面，新增部门和修改部门配置，代码重复率太高了（懒得写逻辑和没有提交规划导致的，你怎么能这么懒，写完了你还不改可要打屁股的）

#### 3.超级管理员修改部门配置，成功配置完成，会调用toast的SetDepartment再次发起请求获取部门数组，这个工作其实可以在本地修改departments数组完成，那么有几种考虑：
###### (1).部门太多的时候，本地修改性能消耗大。
###### (2).部门比较少的时候，发送请求更新浪费流量资源。
###### (3).实际情况来说，应该还是本地修改比较好。

#### 4.删除部门的时候，部门ID存在localdata里面，感觉不是很好啊
###### (1).使用VUEX
###### (2).使用和删除面试成员时一样的传参方式也行。




